#全局配置(必须)
global:
  local_ip: 0.0.0.0                                               #本地IP，用处：不影响框架正常运行，用于从框架配置拿到本机ip
  coroutine:                                                      #框架模式选项，二选一
    enable: true                                                  #true表示使用[协程模式]
  threadmodel:
    fiber:
      - instance_name: fiber_instance
        concurrency_hint: 8                                       #一共创建多少个fiber worker线程
        scheduling_group_size: 8                                  #每个调度组一共有多少个fiber worker线程
        reactor_num_per_scheduling_group: 1                       #每个调度组一共有多少个reactor模型，针对io比较重的场景，可以适当调大此参数，但也不要过高
  enable_gracefully_stop: true                                    #启用优雅停止，能保证已经进队列的请求需要处理完之后才能停止服务端
#服务端配置
server:
  app: test                                                       #业务名，如：COS、CDB
  server: helloworld                                              #业务的模块名，如某业务中的access模块
  service:                                                        #业务service，可以有多个
    - name: trpc.test.helloworld.Greeter                          #service名称，需要按照格式填写，第一个字段默认为trpc，第二、三个字段为上边的app和server配置，第四个字段为用户定义的service_name
      protocol: trpc                                              #service应用层协议 trpc http
      network: tcp                                                #网络监听类型：tcp udp
      ip: 0.0.0.0                                                 #监听ip
      port: 15001                                                 #监听port
      max_conn_num: 10000                                         #最大连接数目
      queue_size: 20000                                           #接收队列大小
      queue_timeout: 5000                                         #请求在接收队列的超时时间，ms
      idle_time: 60000                                            #连接空闲超时时间，ms
      max_packet_size: 10000000                                   #请求包大小限制

#客户端配置
client:

#插件配置
plugins:
    log:                                                            #日志配置
        default:
          - name: default
            min_level: 2 # 0-trace, 1-debug, 2-info, 3-warn, 4-error, 5-critical
            format: "[%Y-%m-%d %H:%M:%S.%e] [thread %t] [%l] [%@] %v"	# 实例中所有sinks的输出
            mode: 2 # 1-同步, 2-异步, 3-极速
            sinks:
              local_file:                      # 本地文件日志
                eol: true                      # 每次输出是否自动换行。默认换行
                filename: server_1_.log             # 日志文件名，包含路径（相对或绝对路径）。默认为trpc.log
                roll_size: 100000000           # 输出本地日记单个文件大小,默认100M
                reserve_count: 9               # 输出本地日记滚动文件个数,默认9个

